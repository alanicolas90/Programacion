<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>Regular expressions</title> 
    </head>
    <body>
        <form>
            <label for="DNI">DNI:
                <input type="text" id="dni"/>
            </label>
        </form>
        <script>  
            function validate() {
                if(!validDNI(this.value))alert('Not a valid DNI');
            }

            function validDNI(val){
                var letras = ["T","R","W","A","G","M","Y","F","P","D","X","B",
                    "N","J","Z","S","Q","V","H","L","C","K","E","T"];
                if(!(/^\d{8}[A-Z]$/.test(val))){
                    return false; 
                }
                if (val.charAt(8) != letras[(val.substring(0,8)) %23] ){ 
                    return false; 
                }
                return true; 
            }
            
            function assignEvents() {
                document.getElementById("dni").addEventListener("blur", validate);
            }
            document.addEventListener("DOMContentLoaded", assignEvents);
        </script>     
    </body>
</html>
